<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>CSC148: </title>
  <link href="CSC148%20a2_files/css.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="CSC148%20a2_files/main.css">
  <link rel="stylesheet" href="CSC148%20a2_files/course.css">
      <script src="CSC148%20a2_files/jquery.js"></script>
</head>
<body>

<div class="content">
<h1></h1>
<h1 id="assignment-2-organization-hierarchy">Assignment 2: Organization Hierarchy</h1>
<p><strong>Due date</strong>: Tuesday, November 26, 2019 at 4:00 p.m. sharp (not 4:10!)</p>
<p>You may work alone or with one other person on this assignment. 
Partners should be invited in MarkUs (and invitations accepted) by end 
of day Friday, November 22.</p>
<h2 id="learning-goals">Learning Goals</h2>
<p>After completing this assignment, you will be able to: - model 
different kinds of real-world hierarchical data using trees - implement 
recursive operations on trees (both non-mutating and mutating) - use 
inheritance to design classes according to a common interface</p>
<p>You will also continue to practice writing test suites for the code you are developing.</p>
<h2 id="introduction">Introduction</h2>
<p>As we’ve discussed in class, trees are a fundamental data structure 
used to model all sorts of hierarchical data. In this assignment, you 
will be modelling an organization’s employees using trees.</p>
<p>For simplicity, we will be representing an organization as a 
collection of employees. As such, the nodes in our tree will be 
employees of an organization. Employees will have subordinate-superior 
relationships, where one employee may work under another. Additionally, 
some employees are leaders of a department: for example, the head of a 
department. All employees that work under a leader are said to be part 
of that department.</p>
<p>For this assignment, we have provided you with an interface to 
navigate and modify your organization, as well as client code which will
 use the classes you implement.</p>
<h2 id="setup-and-starter-code">Setup and starter code</h2>
<p>Download the <a href="https://www.teach.cs.toronto.edu//~csc148h/fall/assignments/a2/a2.zip">assignment materials</a> and unzip it into your <code>assignments/a2/</code> folder.</p>
<p>This folder contains the following files:</p>
<ul>
<li><p><code>organization_hierarchy.py</code>: The starter code and the 
file that you need to modify. All classes, methods, and functions that 
you need to write should be done in this file.</p></li>
<li><p><code>client_code.py</code>: The client code that uses the code you will be writing in <code>organization_hierarchy.py</code>. Look through this file to understand what you need to implement. Do not modify this file.</p></li>
<li><p><code>organization_ui.py</code>: The file that you will run to 
view the user interface. You do not have to read nor understand the code
 in this file. Do not modify this file.</p></li>
<li><p><code>employees.txt</code>: A sample file to be used in Task 6, containing a hierarchy stored in a file.</p></li>
</ul>
<p>While we have not provided you with a sample test file, you will want
 to create your own. There are over 20 methods for you to implement in 
this assignment: manually testing them all will prove difficult. The <code>organization_ui.py</code> is only capable of very basic functionality and not thorough testing, so you shouldn’t rely entirely on it.</p>
<h2 id="problem-description">Problem description</h2>
<p>The program for this assignment consists of four main classes:</p>
<ol type="1">
<li>A class representing an employee.</li>
<li>A class representing a leader, a special type of employee.</li>
<li>A class representing an organization.</li>
<li>A class representing the departments of an organization, and their salaries (“Department Salary Tree”).</li>
</ol>
<p>Please read through the following sections carefully to understand 
what is required for this program. Afterwards, we’ll provide a breakdown
 of the tasks.</p>
<h3 id="employee-class">Employee class</h3>
<p>As mentioned before, our Employees are the nodes of the tree. Each 
employee will have its own set of characteristics: their employee ID 
number, their name, position, salary, and rating.</p>
<p>Each employee may have one superior and any number of subordinates. For example, consider the following tree of employees:</p>
<figure>
<img src="CSC148%20a2_files/a2_01_basic_hierarchy.png" alt=""><figcaption>Diagram of a basic hierarchy.</figcaption>
</figure>
<p>Notice that ID numbers are unique to employees: the numbers used 
don’t matter (e.g.&nbsp;Alice could have an ID of 1000), but there 
cannot be any duplicates within the hierarchy.</p>
<p>While all employees have superior-subordinate relationships, there 
are 2 types of subordinates that we may mention: 1. Direct subordinates:
 These are subordinates that work directly under another employee. For 
example, Dave (ID: 2) is a direct subordinate of Alice. 2. Indirect 
subordinates: These are subordinates that <em>do not</em> work directly 
under another employee. For example, being the subordinate of a 
subordinate. In our example above, Gina (ID: 7) would be an indirect 
subordinate of Alice.</p>
<h3 id="leader-class">Leader class</h3>
<p>Leaders are a subclass of Employee. While they are fairly similar to 
employees, they also keep track of the department that they lead. All 
subordinates (both direct and indirect) are said to be part of the 
department. For example, consider the following hierarchy:</p>
<figure>
<img src="CSC148%20a2_files/a2_02_group_hierarchy.png" alt=""><figcaption>Diagram of a hierarchy with departments.</figcaption>
</figure>
<p>Ellen (ID: 5) is the Leader of the department named “Human 
Resources”. As such, both the employees Gina (ID: 7) and Fred (ID: 9) 
are also in the “Human Resources” department. Additionally, since 
they’re all under Alice (ID: 1) in the hierarchy, who is the leader of 
“Some Corp.”, they are also part of the “Some Corp.” department.</p>
<h3 id="organization-class">Organization class</h3>
<p>The Organization class is responsible for keeping track of the head 
of the organization. Most operations which involve accessing the 
employees are done through the organization class, such as adding an 
employee to the organization, removing one, or finding one with a 
specific employee ID number.</p>
<h3 id="department-salary-tree-class">Department-Salary Tree class</h3>
<p>In addition to the hierarchy-related classes themselves, you are also
 tasked with creating another type of tree from an organization. This 
tree represents the departments in an organization and the salaries of 
the members in that department (but not of its subdepartments).</p>
<p>For example, consider the tree presented previously:</p>
<figure>
<img src="CSC148%20a2_files/a2_03_group_hierarchy_coloured.png" alt=""><figcaption>Diagram of a hierarchy with departments, coloured to indicate members of each department.</figcaption>
</figure>
<p>There are 3 departments in this tree: Some Corp., Finance, and Human 
Resources. The corresponding Department-Salary Tree would then look as 
follows:</p>
<figure>
<img src="CSC148%20a2_files/a2_04_group_salary_tree.png" alt=""><figcaption>Diagram of Department-Salary Tree.</figcaption>
</figure>
<p>We’ve noted how the average salaries were calculated for convenience,
 but only the average is stored in the tree. The Department-Salary Tree 
is precisely a tree representing the hierarchy of departments in an 
organization, and the average salaries of each department’s employees 
(excluding the salaries of their subdepartments).</p>
<h2 id="task-0-getting-started">Task 0: Getting started</h2>
<ol type="1">
<li>Download the starter code into your folder for Assignment 2.</li>
<li>Mark your <code>a2</code> folder as ‘sources root’ in Pycharm by 
right-clicking your a2 folder, and selecting “Mark Directory as” -&gt; 
“Sources Root.” This will save you from having to see any unresolved 
references warnings.</li>
<li>Open <code>organization_hierarchy.py</code> and familiarize yourself with the starter code.</li>
<li>Open <code>client_code.py</code>: We’ve broken various functions 
into different tasks: as you go through the next tasks, read through the
 related functions. Think about the methods you’ll need to write: what 
class they belong to, what they do, what they’re expected to return, 
etc.</li>
<li>Run <code>organization_ui.py</code>: While nothing will work at the 
moment, this will be one main way of interacting with your code. You may
 also use the Python console to test your code, and of course you should
 be writing pytests, but you may find the interface helpful in 
debugging.</li>
</ol>
<h3 id="organization_ui.py">organization_ui.py</h3>
<p>Running <code>organization_ui.py</code> will provide you with an interface that will eventually look as follows:</p>
<figure>
<img src="CSC148%20a2_files/a2_ui_01.png" alt=""><figcaption>An image of the UI featuring some Employees.</figcaption>
</figure>
<p>Initially, running this file will give you an empty UI which raises errors whenever you do anything.</p>
<p>After completing Task 2, you should be able to run <code>organization_ui.py</code>
 to add Employees to an Organization. Many of the buttons in this 
interface won’t be functional until you implement their corresponding 
methods. Below is a labelled diagram detailing which tasks each button 
relies on:</p>
<figure>
<img src="CSC148%20a2_files/a2_ui_02_labelled.png" alt=""><figcaption>A labelled diagram of the UI, coloured by tasks.</figcaption>
</figure>
<p>Do <strong>not</strong> rely on <code>organization_ui.py</code> as 
your only means of testing your code. The interface working correctly is
 a good sign, but it does not catch any errors for you.</p>
<h2 id="task-1-employee-and-organization">Task 1: Employee and Organization</h2>
<p>Your first task is to implement the basic functionality for the <code>Employee</code> and <code>Organization</code> classes. Take a look through <code>client_code.py</code> and <code>organization_hierarchy.py</code> and find out what methods you need to implement.</p>
<p>One important note: When writing methods that return multiple 
employees, make sure they’re always in ascending order of their IDs. For
 example, an employee with the ID 1 should always appear before an 
employee with the ID 2 for such methods.</p>
<p><strong>You must not use <code>list.sort</code> or <code>sorted</code> in your assignment.</strong> Instead, the header for a helper function called <code>merge</code> has been written for you. Implement its body. You will find it useful when you’re merging sorted lists together.</p>
<p>Employee IDs are all unique; you do not need to handle duplicates, 
other to ensure in later tasks that you do not end up with duplicates in
 your tree.</p>
<p>One of the methods you’ll need to implement in Task 1 is called <code>get_closest_common_superior</code>:
 this returns the closest common superior between two Employees. To 
explain what a “common superior” is, consider the following (abstract) 
scenario:</p>
<figure>
<img src="CSC148%20a2_files/a2_05_abstract_ids.png" alt=""><figcaption>An abstract tree of employees.</figcaption>
</figure>
<p>The closest common superior between the employees with IDs 3 and 5 is
 the one with ID 2. While the employee with ID 1 is also a common 
superior between 3 and 5, this is not the closest common superior.</p>
<p>Similarly, the closest common superior between the employees with IDs
 3 and 4 is the one with ID 1, as it’s the only superior they have in 
common. For simplicity, if we were to ask for the closest common 
superior between the employees with ID 2 and 3 (where 2 is the superior 
of 3), the closest common superior is 2. This way, any 2 Employees in 
our Organization will always have at least one common superior.</p>
<h3 id="progress-check">Progress check!</h3>
<p>Initialize an Organization and an Employee to test your code and understand how they work together.</p>
<p>Make sure you document any methods you write that we haven’t 
provided! This means writing type contracts, docstrings, pre-conditions,
 etc.</p>
<p>You will want to write doctests and/or pytests to test the attributes of your <code>Employee</code> and <code>Organization</code> classes. Having these tests now will save you a lot of time and energy in later tasks. Doctests are <em>not</em>
 mandatory, but you should include them where they’ll be helpful in 
testing your method. Ideally, you should have a set of pytest cases 
written for each method you write.</p>
<h2 id="task-2-leaders-and-departments">Task 2: Leaders and Departments</h2>
<p>After implementing Employees and Organizations, your next task is to implement a subclass of <code>Employee</code> called <code>Leader</code>, and any related functionality.</p>
<p>Once again, look through <code>client_code.py</code> to determine what methods you’ll need to implement in Task 2.</p>
<h3 id="progress-check-1">Progress check!</h3>
<p>After this step is done, you should be able to run <code>organization_ui.py</code>
 without any errors appearing. Not all of the buttons will work, but you
 should be able to create and remove employees without issue, along with
 traversing the hierarchy.</p>
<p>As in Task 1, make sure you document any methods you add. Doctests 
are not required, unless helpful. You should be getting in the habit of 
writing pytest tests by now though!</p>
<h2 id="task-3-leaders-in-the-organization">Task 3: Leaders in the Organization</h2>
<p>Looking at the UI, you might notice that an Employee can become a 
Leader and a Leader can become an Employee. While you can’t directly 
change an instance of one class to another, you can modify the tree 
itself. What changes would you have to make in order to replace an 
Employee with a Leader?</p>
<p>Task 3 is centered around leader-based methods that modify an 
organization’s structure: converting an Employee to a Leader and vice 
versa, and making an employee take over a department.</p>
<p>The method <code>change_department_leader</code> moves an employee 
and their subordinates up the hierarchy in order to become the leader of
 their department. In this method, the head of the organization <strong>can</strong>
 change – as such, we require the head of the organization to be 
returned to our client code when this method is called. For example, 
suppose we have the following (very abstract) hierarchy:</p>
<figure>
<img src="CSC148%20a2_files/a2_06_abstract_eid_tree.png" alt=""><figcaption>An abstract diagram depicting a Department.</figcaption>
</figure>
<p>If the employee with EID 3 were to become leader, then the hierarchy would become:</p>
<figure>
<img src="CSC148%20a2_files/a2_07_abstract_become_leader.png" alt=""><figcaption>An abstract diagram depicting the same department as before, but with the leader changing.</figcaption>
</figure>
<p>Where 1 becomes a subordinate of 3, while 3 keeps its previous subordinates.</p>
<h3 id="progress-check-2">Progress check!</h3>
<p>Run <code>organization_ui.py</code> and see if these methods work as 
expected. As the organization is being modified, you’ll want to be 
careful. You should be able to change an <code>Employee</code> into a <code>Leader</code>
 without your hierarchy breaking. Are you losing any subordinates when 
you become a department leader? Make sure you check thoroughly.</p>
<p>Again, make sure you document any methods you add. Doctests are not 
required, unless helpful to you. You’re writing more complex code now, 
so testing with doctest or the UI is likely insufficient. Make sure you 
are writing pytests, and also running your Task 1 and Task 2 pytest 
modules too.</p>
<h2 id="task-4-moving-employees">Task 4: Moving Employees</h2>
<p>Task 4 consists of more methods that change the structure of your 
tree. As these methods tend to have some specific nuances to them, make 
sure to read the below descriptions carefully.</p>
<p>For the <code>obtain_subordinates</code> method of the <code>Employee</code>
 class: a list of eids are passed in. All Employees with those eids 
become subordinates of the Employee that called obtain_subordinates. For
 example, suppose you have the following hierarchy (simplified to only 
list ID numbers):</p>
<figure>
<img src="CSC148%20a2_files/a2_08_abstract_id_tree.png" alt=""><figcaption>An abstract hierarchy.</figcaption>
</figure>
<p>If the employee with ID 2 were to obtain the employees with IDs 3 and 5 as subordinates, then the hierarchy would become:</p>
<figure>
<img src="CSC148%20a2_files/a2_09_abstract_become_obtain_subordinates.png" alt=""><figcaption>The previous abstract hierarchy, where another employee obtained 2 subordinates.</figcaption>
</figure>
<p>Notice that the employee with ID 4 didn’t follow its former superior,
 3. Instead, it became the subordinate of 3’s former superior. All 
abandoned subordinates should follow this pattern, moving up the 
hierarchy as needed.</p>
<p>If the head of an organization is taken as a subordinate, then the 
highest-rated direct subordinate of the head (i.e.&nbsp;the one with the
 largest ‘rating’ value: if multiple subordinates have the same rating, 
use the lowest eid) becomes the new head. We’ve written the header for <code>get_highest_rated_subordinate</code> for you: implement its body and make use of this method.</p>
<p>There are also multiple methods that revolve around firing an 
employee. When an employee is fired, all of their direct subordinates 
become direct subordinates of their superior. For example, suppose we 
have the following abstract scenario:</p>
<figure>
<img src="CSC148%20a2_files/a2_10_abstract_tree.png" alt=""><figcaption>An abstract hierarchy.</figcaption>
</figure>
<p>If we were to fire the Employee with an ID of 3, then the Employees 
with ID 4 and 5 would become subordinates of the one with ID 1, like so:</p>
<figure>
<img src="CSC148%20a2_files/a2_11_abstract_fire.png" alt=""><figcaption>The previous abstract hierarchy, where an employee was fired.</figcaption>
</figure>
<p>Similar to <code>obtain_subordinates</code>: if the head of an Organization is removed, then the direct subordinate with the highest rating becomes the new head.</p>
<p>You are also required to implement the Organization method <code>promote_employee</code>.
 This method is substantially different from the previous ones, in that 
the employee being promoted also changes its position, its salary, and 
potentially its type. In this method, the promoted employee continues to
 be promoted until it has a superior whose rating is higher than its 
own: if their original superior has a higher rating than them, then 
nothing happens. Consider the following scenario (where Leaders have the
 department that they’re Leaders of bolded):</p>
<figure>
<img src="CSC148%20a2_files/a2_12_simple_hierarchy.png" alt=""><figcaption>A simple (mostly linear) hierarchy.</figcaption>
</figure>
<p>Suppose we wanted to promote Joe (ID: 11). We would continually swap 
Joe up the hierarchy, performing 3 swaps in total (as there is no 
superior with a higher rating):</p>
<figure>
<img src="CSC148%20a2_files/a2_13_promote.png" alt=""><figcaption>The steps of promoting an Employee.</figcaption>
</figure>
<p>To help with this, we have provided you the header for the Employee 
helper method swap_up(). Implement and use this method to aid in your 
implementation.</p>
<h3 id="progress-check-3">Progress check!</h3>
<p>Once again, run <code>organization_ui.py</code> and see if these 
methods work as expected. As these methods mutate the structure of your 
organization, you’ll want to test these methods extremely thoroughly so 
that no Employees get accidentally removed. We recommend you draw 
pictures to keep track of what your organization looks like, and any 
changes that occur.</p>
<p>Again, make sure you document any methods you add. Doctests are not 
required, unless helpful to you. This task is the most complex, and the 
most linked to the previous tasks, so thorough testing is critical here.</p>
<p><strong>You’ll want to make sure your previously implemented methods still work properly, especially after calling these methods.</strong>
 There are many opportunities for your Organization to break in this 
task (i.e.&nbsp;improperly updated subordinates, superiors, or heads).</p>
<p>At this point, almost all of the buttons in the UI should be 
functioning except for two, which are handled in Tasks 5 and 6. For 
Tasks 5 and 6, you may do them in any order: for example, completing 
Task 6 first.</p>
<h2 id="task-5-department-salary-trees">Task 5: Department-Salary Trees</h2>
<p>In this task, you will be implementing the <code>DepartmentSalaryTree</code> class, as well as implementing a function that takes in an <code>Organization</code> and returns the corresponding <code>DepartmentSalaryTree</code>. For an explanation of what a Department-Salary Tree is, see the “Department-Salary Tree class” section above.</p>
<p>Keep in mind that the average salaries in the Department-Salary Tree do <em>not</em>
 include the salaries of employees in subdepartments. You must keep the 
same department structure as is present in the original Organization 
hierarchy. ### Progress check! Run <code>organization_ui.py</code> and 
add a few departments into an organization you create. When you click 
“Display Department Salary Tree”, does the correct tree appear? Make 
sure to check thoroughly.</p>
<p>You will want to write doctests and/or pytests to test your creation of <code>DepartmentSalaryTree</code>s. After creating a <code>DepartmentSalaryTree</code>,
 your organization should not have changed in any way. If you wrote any 
helper functions, make sure you document them properly (type contracts, 
docstrings, etc.).</p>
<h2 id="task-6-reading-from-files">Task 6: Reading from Files</h2>
<p>In this final task, you are to implement a function that reads an 
organization in from a CSV (comma-separated value) file. Each line in 
this file represents an Employee or Leader, taking the form: 
ID,Name,Position,Salary,Rating,Superior ID*,Department Name**</p>
<p>* Superior ID refers to the ID of the employee’s superior. If this 
field is empty, that means that the employee is to be the head of the 
organization. Only one such employee will exist in the file.</p>
<p>** Department Name refers to the name of the department that they’re 
the leader of. If no such name exists, then the employee is simply an 
Employee. Otherwise, they’re a Leader.</p>
<p>Your solution should work for any file with zero or more lines that 
meet the format described above. You do not need to handle any other 
line formats or errors.</p>
<p>We have provided employees.txt. Reading this file should result in the following Organization: <img src="CSC148%20a2_files/a2_14_file_hierarchy.png" alt="The Organization hierarchy represented by employees.txt"></p>
<p>Notice that the lines in <code>employees.txt</code> are not 
necessarily the order that you would add Employees in: the head of the 
organization, Alice, is mention amidst the other Employees. Your code 
must be able to build the correct organization regardless of what order 
the Employees are listed in. ### Progress check! After you’ve completed 
this task, you should be able to run everything in <code>organization_ui.py</code> without error! Having Task 6 completed means you can test your code on larger examples without manually creating everything.</p>
<p>And you guessed it: you can write tests for this as well! If you 
wrote any helper functions, make sure you document them properly (type 
contracts, docstrings, etc.).</p>
<h2 id="polish">Polish!</h2>
<p>Take some time to polish up. This step will improve your mark, but it also feels so good. Here are some things you can do:</p>
<ul>
<li>Review your code and look for ways to simplify the design, or 
improve the efficiency. Good code means more than just working code.</li>
<li>Pay attention to any violations of the Python style guidelines that PyCharm points out. Fix them!</li>
<li>In <code>organization_hierarchy.py</code>, run the provided PyTA call to check for errors and warnings. Fix them!</li>
<li>Check your docstrings to make sure they are precise and complete and
 that they follow the conventions of the Function Design Recipe and the 
Class Design Recipe.</li>
<li>Read through and polish your internal comments.</li>
<li>Remove any code you added just for debugging, such as print statements.</li>
<li>Remove the “TODO”s wherever you have completed the task.</li>
<li>Take pride in your gorgeous code!</li>
</ul>
<h2 id="submission-instructions">Submission instructions</h2>
<ol type="1">
<li>Login to MarkUs and create a group for the assignment (or specify that you’re working alone).</li>
<li><strong>DOES YOUR CODE RUN</strong>?!</li>
<li>Submit the file <code>organization_hierarchy.py</code>.</li>
<li>On a fresh Teaching Lab machine, make a new folder download all of 
the files you submitted into it. Test your code thoroughly. Your code 
will be tested on the Teaching Lab machines, so it must run in that 
environment. This step will also confirm that you submitted the right 
version of the required files, and didn’t introduce an error at the last
 moment, for example by adding a comment of changing a variable name.</li>
<li>Congratulations, you are finished with Assignment 2, your last 
assignment for CSC148! Take a well-deserved break and go back to binging
 Season Whatever of That Show You Watch!</li>
</ol>
  </div>

  <footer>
    <div id="cs-logo">
      <a href="http://web.cs.toronto.edu/">
        <img id="logo" src="CSC148%20a2_files/dcs_logo.png">
      </a>
    </div>
    <p>
      For course-related questions, please contact <strong>csc148-2019-09 at cs.toronto.edu</strong>.
    </p>
  </footer>

  <!--scripts-->
  <script>
    jQuery('.content').click(function() {
      jQuery('.dropdown-list').hide();
    });
    jQuery('nav').click(function(event){
      event.stopPropagation();
    });
    jQuery('.dropdown-toggle').click(function(event){
      jQuery(event.target).siblings('.dropdown-list').toggle();
    });
  </script>


</body></html>